# 1. IP 주소

IP 주소는 서로 다른 네트워크에서 호스트를 식별하기 위한 고유한 주소이다.
네트워크 상에서 데이터를 주고 받는 모든 기기는 고유한 IP 주소를 가진다.

## 1) IPv4 vs IPv6

가장 큰 차이는 IPv4는 32비트 주소 단위, IPv6은 128비트 주소 단위이다.
기존 IPv4는 2^32 개인 43억 개의 주소 만을 가지고 있었다.
따라서 인터넷이 급속도로 발전하여 네트워크에 접속한 기기도 많아지는 지금 IPv4로 모든 기기를 식별하기에는 한계가 있었다.
이러한 문제를 해결하기 위해 128비트 형식으로 2^128 개의 고유한 주소를 가질 수 있도록 IPv6이 고안되었다.

|               | IPv4                  | IPv6                                          |
|---------------|-----------------------|-----------------------------------------------|
| 식별 가능한 주소 개수  | 2^32(43억개)            | 2^128(고갈 염려 없음)                               |
| 표기법           | 10진수(255.255.255.255) | 16진수(ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff) |
| 보안            | IPSec 선택 제공           | IPSec 기본 제공                                   |
| 여러 장치에 데이터 전달 | 브로드캐스트                | 멀티캐스트, 애니캐스트                                  |

## 2) 서브넷

서브넷은 하나의 네트워크를 여러 개의 소규모 네트워크로 분할하는 방식이다.
하나의 큰 네트워크를 여러 개의 서브넷으로 분리하면 각각의 서브넷 내에서만 트래픽이 흐르기 때문에 네트워크 혼잡을 줄일 수 있다.
또한 서브넷 내부에서만 통신을 하도록 해 보안을 향상할 수 있다.

### 서브넷 마스크

IP 주소에서 어떤 부분이 서브넷 네트워크인지, 어떤 부분이 호스트인지 구분하기 위한 값이다.
예를 들어 `192.168.0.1/24`로 표기된 서브넷 네트워크가 있다면 IP 주소의 시작부터 24비트까지는 서브넷 네트워크임을 알려준다.
뒤의 8비트가 호스트를 구별하기 위한 번호이다.
예를 들어 `192.168.0.1/24`에서 192.168.0.5와 192.168.0.24는 모두 동일한 서브넷 내부에 있는 호스트이다.
하지만 192.168.0.1과 192.168.4.1은 동일한 서브넷이 아니다.

## 3) 공용(Public) IP와 사설(Private) IP

IPv4의 주소 고갈을 막기 위해 공용 IP와 사설 IP 개념이 도입되었다.
공용 IP는 전 세계 네트워크에서 유일하게 식별가능한 IP이다.
사설 IP는 로컬 네트워크 내에서 자유롭게 할당할 수 있는 IP이다.

예를 들어 "부산광역시 금정구 부산대학로 63번길 2"는 전국에서 유일하게 존재하는 주소(공용 IP)이다.
반면 "컴퓨터공학관 201호"는 다른 대학교에도 존재할 수 있지만 부산대학교 내에서는 유일하게 식별할 수 있다.(사설 IP)

이처럼 모든 기기에 공용 IP를 할당 받는 대신 네트워크의 라우터 하나가 공용 IP를 할당받고 네트워크 내부는 사설 IP를 통해서 호스트를 식별하면 공용 IP를 절약할 수 있다.
사설 IP는 NAT를 통해 공용 IP로 변환되어 외부와 통신한다.

## 3) 라우팅 프로토콜

네트워크 장치 간의 데이터 전송 경로를 효율적으로 선택하기 위한 프로토콜이다.
호스트와 호스트 사이의 효율적인 경로 구성은 라우팅 프로토콜이 담당한다.

### IGP(Internal Gateway Protocol)

하나의 자율 시스템(기업이나 기관 등) 내에서 사용하는 라우팅 프로토콜이다.

- RIP(Routing Information Protocol): 이웃 라우터와 정보를 교환하여 경로를 찾는다.
- OSPF(Open Shortest Path First): 네트워크 내 모든 라우터가 전체 네트워크를 파악할 수 있어 최단 경로를 계산할 수 있다.

### EGP(External Gateway Protocol)

서로 다른 자율 시스템 간의 라우팅 또한 가능하다.

- BGP(Border Gateway Protocol): 이웃 라우터와 정보를 교환하여 경로 정보와 정책을 기반으로 경로를 선택한다.

## 4) IP 할당

IP 주소의 관리 주체는 계층화되어 있어 여러 기관이 담당한다.
IANA가 최상위 관리 기관이고 RIR는 각 대륙별로 IP 주소를 관리하며 ISP가 RIR부터 IP 주소를 할당받아 개인이나 단체에게 IP 주소를 제공한다.

일반적인 사용 환경(특히 가정)에서는 DHCP 서버가 동적으로 할당하는 IP 주소를 사용하고 서버 등 고유 IP가 필요한 경우 고정 IP를 사용한다.
동적이든 고정이든 공용 IP가 할당되면 각 가정이나 기업에서 라우터가 각 기기에 사설 IP를 할당한다.

## 5) NAT(Network Address Translation)

사설 IP를 공용 IP 주소로 변환하여 인터넷에 접속할 수 있는 기술이다.
NAT는 사설 IP가 보낸 패킷을 NAT 테이블에 기록해두었다가 해당 패킷이 다시 돌아왔을 때 이를 보고 원래 출발지 경로로 패킷을 보내준다.

## 6) ICMP(Internet Control Message Protocol)

ICMP는 네트워크 상태와 오류 정보를 전송하는 프로토콜이다.
네트워크 레이어에서 호스트와 호스트 간 연결 시 발생하는 오류를 탐지하거나 네트워크를 진단할 수 있다.

- Echo Request/Echo Reply: 송신자가 수신자에게 단순한 요청과 응답을 교환하여 네트워크가 원할한지 진단gksek.
- Destination Unreachable: 목적지 호스트에 도달할 수 없을 때 송신자에게 전송된다.